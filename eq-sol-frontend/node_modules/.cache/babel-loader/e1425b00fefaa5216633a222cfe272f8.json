{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Acer\\\\desktop\\\\Eq-sol\\\\eq-sol-frontend\\\\src\\\\UploadCrop.js\";\nimport React, { Component } from 'react';\nimport 'react-image-crop/dist/ReactCrop.css';\nimport ReactCrop from 'react-image-crop';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default class UploadCrop extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      src: null,\n      crop: {\n        unit: '%',\n        width: 30,\n        aspect: 16 / 9\n      }\n    };\n\n    this.onSelectFile = e => {\n      if (e.target.files && e.target.files.length > 0) {\n        const reader = new FileReader();\n        reader.addEventListener('load', () => this.setState({\n          src: reader.result\n        }));\n        reader.readAsDataURL(e.target.files[0]);\n      }\n    };\n\n    this.onImageLoaded = image => {\n      this.imageRef = image;\n    };\n\n    this.onCropComplete = crop => {\n      this.makeClientCrop(crop);\n    };\n\n    this.onCropChange = (crop, percentCrop) => {\n      // You could also use percentCrop:\n      // this.setState({ crop: percentCrop });\n      this.setState({\n        crop\n      });\n    };\n  }\n\n  async makeClientCrop(crop) {\n    if (this.imageRef && crop.width && crop.height) {\n      const croppedImageUrl = await this.getCroppedImg(this.imageRef, crop, 'newFile.jpeg');\n      this.setState({\n        croppedImageUrl\n      });\n    }\n  }\n\n  getCroppedImg(image, crop, fileName) {\n    const canvas = document.createElement('canvas');\n    const scaleX = image.naturalWidth / image.width;\n    const scaleY = image.naturalHeight / image.height;\n    canvas.width = crop.width;\n    canvas.height = crop.height;\n    const ctx = canvas.getContext('2d');\n    ctx.drawImage(image, crop.x * scaleX, crop.y * scaleY, crop.width * scaleX, crop.height * scaleY, 0, 0, crop.width, crop.height);\n    return new Promise((resolve, reject) => {\n      canvas.toBlob(blob => {\n        if (!blob) {\n          //reject(new Error('Canvas is empty'));\n          console.error('Canvas is empty');\n          return;\n        }\n\n        blob.name = fileName;\n        window.URL.revokeObjectURL(this.fileUrl);\n        this.fileUrl = window.URL.createObjectURL(blob);\n        resolve(this.fileUrl);\n      }, 'image/jpeg');\n    });\n  }\n\n  render() {\n    const {\n      crop,\n      croppedImageUrl,\n      src\n    } = this.state;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(ReactCrop, {\n        src: props.image,\n        crop: crop,\n        className: \"img-fluid\",\n        ruleOfThirds: true,\n        onImageLoaded: this.onImageLoaded,\n        onComplete: this.onCropComplete,\n        onChange: this.onCropChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 17\n      }, this), console.log(crop), /*#__PURE__*/_jsxDEV(\"img\", {\n        alt: \"Crop\",\n        style: {\n          maxWidth: '100%'\n        },\n        src: croppedImageUrl\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 13\n    }, this);\n  }\n\n}","map":{"version":3,"sources":["C:/Users/Acer/desktop/Eq-sol/eq-sol-frontend/src/UploadCrop.js"],"names":["React","Component","ReactCrop","UploadCrop","state","src","crop","unit","width","aspect","onSelectFile","e","target","files","length","reader","FileReader","addEventListener","setState","result","readAsDataURL","onImageLoaded","image","imageRef","onCropComplete","makeClientCrop","onCropChange","percentCrop","height","croppedImageUrl","getCroppedImg","fileName","canvas","document","createElement","scaleX","naturalWidth","scaleY","naturalHeight","ctx","getContext","drawImage","x","y","Promise","resolve","reject","toBlob","blob","console","error","name","window","URL","revokeObjectURL","fileUrl","createObjectURL","render","props","log","maxWidth"],"mappings":";AAAA,OAAOA,KAAP,IAAeC,SAAf,QAA+B,OAA/B;AACA,OAAO,qCAAP;AACA,OAAOC,SAAP,MAAsB,kBAAtB;;AAEA,eAAe,MAAMC,UAAN,SAAyBF,SAAzB,CAAmC;AAAA;AAAA;AAAA,SAE9CG,KAF8C,GAEtC;AACJC,MAAAA,GAAG,EAAE,IADD;AAEJC,MAAAA,IAAI,EAAE;AACJC,QAAAA,IAAI,EAAE,GADF;AAEJC,QAAAA,KAAK,EAAE,EAFH;AAGJC,QAAAA,MAAM,EAAE,KAAK;AAHT;AAFF,KAFsC;;AAAA,SAW9CC,YAX8C,GAW/BC,CAAC,IAAI;AAChB,UAAIA,CAAC,CAACC,MAAF,CAASC,KAAT,IAAkBF,CAAC,CAACC,MAAF,CAASC,KAAT,CAAeC,MAAf,GAAwB,CAA9C,EAAiD;AAC/C,cAAMC,MAAM,GAAG,IAAIC,UAAJ,EAAf;AACAD,QAAAA,MAAM,CAACE,gBAAP,CAAwB,MAAxB,EAAgC,MAC9B,KAAKC,QAAL,CAAc;AAAEb,UAAAA,GAAG,EAAEU,MAAM,CAACI;AAAd,SAAd,CADF;AAGAJ,QAAAA,MAAM,CAACK,aAAP,CAAqBT,CAAC,CAACC,MAAF,CAASC,KAAT,CAAe,CAAf,CAArB;AACD;AACF,KAnB2C;;AAAA,SAsB5CQ,aAtB4C,GAsB5BC,KAAK,IAAI;AACvB,WAAKC,QAAL,GAAgBD,KAAhB;AACD,KAxB2C;;AAAA,SA0B5CE,cA1B4C,GA0B3BlB,IAAI,IAAI;AACvB,WAAKmB,cAAL,CAAoBnB,IAApB;AACD,KA5B2C;;AAAA,SA8B5CoB,YA9B4C,GA8B7B,CAACpB,IAAD,EAAOqB,WAAP,KAAuB;AACpC;AACA;AACA,WAAKT,QAAL,CAAc;AAAEZ,QAAAA;AAAF,OAAd;AACD,KAlC2C;AAAA;;AAoCxB,QAAdmB,cAAc,CAACnB,IAAD,EAAO;AACzB,QAAI,KAAKiB,QAAL,IAAiBjB,IAAI,CAACE,KAAtB,IAA+BF,IAAI,CAACsB,MAAxC,EAAgD;AAC9C,YAAMC,eAAe,GAAG,MAAM,KAAKC,aAAL,CAC5B,KAAKP,QADuB,EAE5BjB,IAF4B,EAG5B,cAH4B,CAA9B;AAKA,WAAKY,QAAL,CAAc;AAAEW,QAAAA;AAAF,OAAd;AACD;AACF;;AAEDC,EAAAA,aAAa,CAACR,KAAD,EAAQhB,IAAR,EAAcyB,QAAd,EAAwB;AACnC,UAAMC,MAAM,GAAGC,QAAQ,CAACC,aAAT,CAAuB,QAAvB,CAAf;AACA,UAAMC,MAAM,GAAGb,KAAK,CAACc,YAAN,GAAqBd,KAAK,CAACd,KAA1C;AACA,UAAM6B,MAAM,GAAGf,KAAK,CAACgB,aAAN,GAAsBhB,KAAK,CAACM,MAA3C;AACAI,IAAAA,MAAM,CAACxB,KAAP,GAAeF,IAAI,CAACE,KAApB;AACAwB,IAAAA,MAAM,CAACJ,MAAP,GAAgBtB,IAAI,CAACsB,MAArB;AACA,UAAMW,GAAG,GAAGP,MAAM,CAACQ,UAAP,CAAkB,IAAlB,CAAZ;AAEAD,IAAAA,GAAG,CAACE,SAAJ,CACEnB,KADF,EAEEhB,IAAI,CAACoC,CAAL,GAASP,MAFX,EAGE7B,IAAI,CAACqC,CAAL,GAASN,MAHX,EAIE/B,IAAI,CAACE,KAAL,GAAa2B,MAJf,EAKE7B,IAAI,CAACsB,MAAL,GAAcS,MALhB,EAME,CANF,EAOE,CAPF,EAQE/B,IAAI,CAACE,KARP,EASEF,IAAI,CAACsB,MATP;AAYA,WAAO,IAAIgB,OAAJ,CAAY,CAACC,OAAD,EAAUC,MAAV,KAAqB;AACtCd,MAAAA,MAAM,CAACe,MAAP,CAAcC,IAAI,IAAI;AACpB,YAAI,CAACA,IAAL,EAAW;AACT;AACAC,UAAAA,OAAO,CAACC,KAAR,CAAc,iBAAd;AACA;AACD;;AACDF,QAAAA,IAAI,CAACG,IAAL,GAAYpB,QAAZ;AACAqB,QAAAA,MAAM,CAACC,GAAP,CAAWC,eAAX,CAA2B,KAAKC,OAAhC;AACA,aAAKA,OAAL,GAAeH,MAAM,CAACC,GAAP,CAAWG,eAAX,CAA2BR,IAA3B,CAAf;AACAH,QAAAA,OAAO,CAAC,KAAKU,OAAN,CAAP;AACD,OAVD,EAUG,YAVH;AAWD,KAZM,CAAP;AAaD;;AAGHE,EAAAA,MAAM,GAAG;AACL,UAAM;AAAEnD,MAAAA,IAAF;AAAQuB,MAAAA,eAAR;AAAyBxB,MAAAA;AAAzB,QAAiC,KAAKD,KAA5C;AACA,wBACI;AAAA,8BACI,QAAC,SAAD;AAAW,QAAA,GAAG,EAAEsD,KAAK,CAACpC,KAAtB;AAA6B,QAAA,IAAI,EAAEhB,IAAnC;AAAyC,QAAA,SAAS,EAAC,WAAnD;AAA+D,QAAA,YAAY,MAA3E;AACJ,QAAA,aAAa,EAAE,KAAKe,aADhB;AAEJ,QAAA,UAAU,EAAE,KAAKG,cAFb;AAGJ,QAAA,QAAQ,EAAE,KAAKE;AAHX;AAAA;AAAA;AAAA;AAAA,cADJ,EAKKuB,OAAO,CAACU,GAAR,CAAYrD,IAAZ,CALL,eAOI;AAAK,QAAA,GAAG,EAAC,MAAT;AAAgB,QAAA,KAAK,EAAE;AAAEsD,UAAAA,QAAQ,EAAE;AAAZ,SAAvB;AAA6C,QAAA,GAAG,EAAE/B;AAAlD;AAAA;AAAA;AAAA;AAAA,cAPJ;AAAA;AAAA;AAAA;AAAA;AAAA,YADJ;AAWH;;AAhG6C","sourcesContent":["import React, {Component} from 'react'\r\nimport 'react-image-crop/dist/ReactCrop.css';\r\nimport ReactCrop from 'react-image-crop';\r\n \r\nexport default class UploadCrop extends Component {\r\n\r\n    state = {\r\n        src: null,\r\n        crop: {\r\n          unit: '%',\r\n          width: 30,\r\n          aspect: 16 / 9,\r\n        },\r\n    };\r\n\r\n    onSelectFile = e => {\r\n        if (e.target.files && e.target.files.length > 0) {\r\n          const reader = new FileReader();\r\n          reader.addEventListener('load', () =>\r\n            this.setState({ src: reader.result })\r\n          );\r\n          reader.readAsDataURL(e.target.files[0]);\r\n        }\r\n      };\r\n    \r\n      // If you setState the crop in here you should return false.\r\n      onImageLoaded = image => {\r\n        this.imageRef = image;\r\n      };\r\n    \r\n      onCropComplete = crop => {\r\n        this.makeClientCrop(crop);\r\n      };\r\n    \r\n      onCropChange = (crop, percentCrop) => {\r\n        // You could also use percentCrop:\r\n        // this.setState({ crop: percentCrop });\r\n        this.setState({ crop });\r\n      };\r\n    \r\n      async makeClientCrop(crop) {\r\n        if (this.imageRef && crop.width && crop.height) {\r\n          const croppedImageUrl = await this.getCroppedImg(\r\n            this.imageRef,\r\n            crop,\r\n            'newFile.jpeg'\r\n          );\r\n          this.setState({ croppedImageUrl });\r\n        }\r\n      }\r\n    \r\n      getCroppedImg(image, crop, fileName) {\r\n        const canvas = document.createElement('canvas');\r\n        const scaleX = image.naturalWidth / image.width;\r\n        const scaleY = image.naturalHeight / image.height;\r\n        canvas.width = crop.width;\r\n        canvas.height = crop.height;\r\n        const ctx = canvas.getContext('2d');\r\n    \r\n        ctx.drawImage(\r\n          image,\r\n          crop.x * scaleX,\r\n          crop.y * scaleY,\r\n          crop.width * scaleX,\r\n          crop.height * scaleY,\r\n          0,\r\n          0,\r\n          crop.width,\r\n          crop.height\r\n        );\r\n    \r\n        return new Promise((resolve, reject) => {\r\n          canvas.toBlob(blob => {\r\n            if (!blob) {\r\n              //reject(new Error('Canvas is empty'));\r\n              console.error('Canvas is empty');\r\n              return;\r\n            }\r\n            blob.name = fileName;\r\n            window.URL.revokeObjectURL(this.fileUrl);\r\n            this.fileUrl = window.URL.createObjectURL(blob);\r\n            resolve(this.fileUrl);\r\n          }, 'image/jpeg');\r\n        });\r\n      }\r\n\r\n\r\n    render() {\r\n        const { crop, croppedImageUrl, src } = this.state;\r\n        return (\r\n            <div>\r\n                <ReactCrop src={props.image} crop={crop} className=\"img-fluid\" ruleOfThirds\r\n            onImageLoaded={this.onImageLoaded}\r\n            onComplete={this.onCropComplete}\r\n            onChange={this.onCropChange} />\r\n                {console.log(crop)}\r\n\r\n                <img alt=\"Crop\" style={{ maxWidth: '100%' }} src={croppedImageUrl} />\r\n            </div>\r\n        )\r\n    }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}